<!DOCTYPE html>
<html>

<head>
    <title>Projet Web 2 : Covid-19</title>
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Crimson Text' rel='stylesheet'>
    <link rel="stylesheet" href="style.css">
</head>

<div id="overlay" class="overlay hidden">
    <div class="modal">
        <button class="close-button">&times;</button>
        <div class="modal-content">

            <div class="modal-chart">
                <canvas id="modalCanvas"></canvas>
                <div id="modalMap"></div>
            </div>
            <div id="modalControls" class="modal-controls hidden">
                <div class="modal-text" id="modalText"></div>

                <div id="sliderContainer" class="control-group hidden">
                    <label id="sliderLabel">Multiplicateur : <span id="sliderValue">100%</span></label>
                    <input type="range" id="modalSlider" min="0" max="200" step="1">
                </div>

            </div>
        </div>
    </div>
</div>

<body>
    <header>
        <div id="title">Dashboard</div>
        <nav>
            <a href="#page1" class="active">Page 1</a>
            <a href="#page2">Page 2</a>
            <a href="#page3">Page 3</a>
        </nav>
    </header>
    <main>
        <section id="page1" class="dashboard-section">
            <h1 class="section-title">
                Quelle est l’importance de l’âge dans la mortalité du Covid-19 ?
            </h1>
            <div class="chart-container">

                <div class="chart chart-clickable"
                    data-desc="Ce graphe représente le nombre de personnes décédées ou sorties vivantes des hôpitaux en France, en fonction de leur âge, entre 2020 et 2023. 
On remarque que plus l’âge des personnes augmente, plus le taux de mortalité augmente lui aussi. Cela peut facilement s’expliquer par le fait que les personnes âgées possèdent une constitution plus faible que les autres.">
                    <h2 class="chart-title">Impact de l'âge sur la mortalité du virus</h2>
                    <canvas id="Chart1_1"></canvas>
                </div>

                <div class="chart chart-clickable"
                    data-desc="Ce graphique met en évidence la dynamique de la mortalité durant la pandémie de Covid-19 sur une période de trois ans. 
On y observe une forte corrélation entre l'âge et le nombre de décès : la courbe verte (tranche des ~80-89 ans) domine largement le graphique, atteignant des pics bien plus élevés que les autres groupes, tandis que la mortalité chez les moins de 60 ans (courbe violette) reste comparativement très faible et stable.">
                    <h2 class="chart-title">Évolution mensuelle des décès liés au COVID-19 par tranche d'âge (Mars 2020
                        - Mars 2023)</h2>
                    <canvas id="Chart1_2"></canvas>
                </div>

            </div>
        </section>

        <section id="page2" class="dashboard-section">
            <h1 class="section-title">
                Le sexe a-t-il un impact sur la dangerosité du virus ?
            </h1>

            <div class="chart-container">

                <div class="chart chart-clickable"
                    data-desc="Ce graphe compare l'impact du Covid-19 selon le sexe, en distinguant les décès des survivants. 
La mortalité est visiblement plus élevée chez les hommes (approchant les 80 000 décès) que chez les femmes. 
D'après l'Ined, cela pourrait venir d’un plus grand risque pour les hommes d’être contaminés, du fait de leurs comportements – moindre respect des gestes barrière, plus grande interaction sociale, moins de télétravail – et aussi de comorbidités (hypertension, diabète), plus fréquentes chez eux à partir de la cinquantaine.

https://www.ined.fr/fr/publications/editions/population-et-societes/la-covid-19-plus-meurtriere-pour-les-hommes-que-pour-les-femmes/#:~:text=Cela%20pourrait%20venir%20d'un,la%20cinquantaine%20%5B5%5D%2C%20qui">
                    <h2 class="chart-title">Impact du sexe sur la mortalité du virus</h2>
                    <canvas id="Chart2_1"></canvas>
                </div>

                <div class="chart chart-clickable"
                    data-desc="Ce graphique illustre une surmortalité masculine constante tout au long de la crise sanitaire. 
Bien que les courbes rouge (hommes) et bleue (femmes) suivent rigoureusement les mêmes fluctuations saisonnières et épidémiques, la courbe des hommes demeure systématiquement au-dessus de celle des femmes. Cela montre que les hommes sont plus à risque que les femmes tout au long de la pandémie.">
                    <h2 class="chart-title">Évolution mensuelle des décès liés au Covid-19 par sexe (Mars 2020 - Mars
                        2023)</h2>
                    <canvas id="Chart2_2"></canvas>
                </div>

                <div class="chart chart-clickable"
                    data-desc="Cette carte montre la différence de mortalité entre les hommes et les femmes dans chaque département. 
Le résultat est très clair : toute la carte est bleue. Cela veut dire que partout en France, il y a eu plus de décès chez les hommes que chez les femmes. 
Comme on ne voit aucune zone rouge (qui indiquerait l'inverse), cela prouve que l'endroit où l'on vit en France ne change rien. Peu importe la région, les hommes ont toujours été plus à risque face au virus que les femmes.">
                    <h2 class="chart-title map-title">Répartition géographique de la surmortalité liée au Covid-19 par
                        sexe en France</h2>

                    <div id="Chart2_3"></div>

                </div>
            </div>


        </section>

        <section id="page3" class="dashboard-section">
            <h1 class="section-title">
                Comparaison de l’importance de l’âge et du sexe sur le nombre de morts
            </h1>
            <div class="chart-container">

                <div class="chart chart-clickable"
                    data-desc="Ce graphique montre le nombre total de morts en séparant les hommes (en bleu) et les femmes (en rose) selon leur âge. 
Ça apporte une nuance importante par rapport aux graphiques précédents. On y voit deux tendances opposées : Entre 45 et 84 ans, la barre bleue est toujours plus haute. Cela confirme que les hommes meurent plus du Covid que les femmes. 
Après 85 ans, la tendance s'inverse brutalement : la barre rose dépasse la bleue. C'est la seule tranche d'âge où il y a plus de décès de femmes.

https://presse.inserm.fr/canal-detox/les-femmes-vivent-plus-longtemps-et-en-meilleure-sante-que-les-hommes-vraiment/">
                    <h2 class="chart-title">Total des décès par tranche d'âge et par sexe</h2>
                    <canvas id="Chart3_1"></canvas>
                </div>

                <div class="chart chart-clickable" data-desc="Ce graphe classe les régions françaises selon le nombre cumulé de victimes. 
L'Île-de-France arrive largement en tête avec près de 30 000 décès, suivie par l'Auvergne-Rhône-Alpes et le Grand Est.L'Île-de-France étant la région la plus peuplée, il est logique d'y observer le plus grand nombre de décès en valeur absolue. 
À l'inverse, la Corse et les régions avec moins de gens affichent naturellement les chiffres les plus bas.">
                    <h2 class="chart-title">Nombre total de décès par région en France</h2>
                    <canvas id="Chart3_2"></canvas>
                </div>
                <div class="chart chart-clickable" data-desc="Ce graphique en anneau met en perspective le nombre total de décès recensés dans une sélection de pays occidentaux. 
Il y a une prédominance des États-Unis. Cela indique que le nombre absolu de décès aux États-Unis est supérieur à celui de tous les autres pays du graphique réunis.Parmi les nations européennes représentées, l'Angleterre et le Pays de Galles (en bleu) affichent la part la plus importante, suivis par la France (en jaune). 
La Belgique, la Suède et l'Écosse sont des fractions plus petites.

https://presse.inserm.fr/canal-detox/les-femmes-vivent-plus-longtemps-et-en-meilleure-sante-que-les-hommes-vraiment/">
                    <h2 class="chart-title">Comparaison internationale du volume de décès observés</h2>
                    <canvas id="Chart3_3"></canvas>
                </div>

            </div>
        </section>
    </main>
    <script>
        // Update nav links visually based on the section we're at

        // Selecting the objects
        const sections = document.querySelectorAll('.dashboard-section');
        const navLinks = document.querySelectorAll('nav a');

        let activePageIndex = 0;

        const observer = new IntersectionObserver(
            // entries are sections, so basically forEach(section)
            entries => {
                entries.forEach(entry => {
                    // Checks if the section is showed on the screen based on a threshold
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        // Update nav links to toggle the active class
                        navLinks.forEach(link => {
                            link.classList.toggle(
                                'active',
                                link.getAttribute('href') === `#${id}`
                            );
                        });
                        activePageIndex = Array.from(sections).indexOf(entry.target);
                    }
                });
            },
            {
                threshold: 0.6
            }
        );

        sections.forEach(section => observer.observe(section));

        // Allow changing page through scrolling

        let isScrolling = false;

        // Listens for any scrolling event
        window.addEventListener('wheel', (event) => {

            // Returns nothing if we are already scrolling or if an overlay is already active
            const overlayactive = !(document.getElementById('overlay')).classList.contains('hidden')
            if (isScrolling || overlayactive) return;

            if (event.deltaY > 20) {  // deltaY > 0 means we are scrolling downwards, > 20 is just to have a small threshold
                // Increase the page index unless it is already the last one
                if (activePageIndex < sections.length - 1) {
                    activePageIndex++;
                    scrollToSection(activePageIndex);
                }
            } else if (event.deltaY < -20) {
                // Decrease the page index unless it is already the first one
                if (activePageIndex > 0) {
                    activePageIndex--;
                    scrollToSection(activePageIndex);
                }
            }
        });

        // Function : set isScrolling on true, enable the scroll animation, small delay and set isScrolling back on false
        function scrollToSection(index) {
            isScrolling = true;
            sections[index].scrollIntoView({ behavior: 'smooth' });
            setTimeout(() => {
                isScrolling = false;
            }, 400); // delay (ms)
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.anychart.com/releases/8.14.0/js/anychart-core.min.js"></script>
    <script src="https://cdn.anychart.com/releases/8.14.0/js/anychart-map.min.js"></script>
    <script src="https://cdn.anychart.com/geodata/2.2.0/countries/france/france.js"></script>
    <script src="Chart1_1.js"></script>
    <script src="Chart1_2.js"></script>
    <script src="Chart2_1.js"></script>
    <script src="Chart2_2.js"></script>
    <script src="Chart2_3.js"></script>
    <script src="Chart3_1.js"></script>
    <script src="Chart3_2.js"></script>
    <script src="Chart3_3.js"></script>
    <script src="Popup.js"></script>
</body>

</html>